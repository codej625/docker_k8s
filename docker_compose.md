# Docker Compose

<br />
<br />

* Docker compose
---

```
Compose는 여러 개의 Docker 컨테이너를 정의하고, 설정하여 함께 실행할 수 있게 도와주는 도구이다.

docker-compose.yml 파일을 사용하면 여러 컨테이너를 한 번에 설정하고 실행할 수 있기 때문에, 
프로젝트에서 여러 서비스 를 하나의 YAML 파일로 정의할 수 있다.
(데이터베이스, 애플리케이션 서버 등)
```

<br />
<br />
<br />
<br />

1. 단일 컨테이너 실행과 차이점

| **항목**                    | **단일 Docker 컨테이너 실행 (`docker run`)**         | **Docker Compose (`docker-compose.yml`)**                |
|-----------------------------|---------------------------------------------------|-------------------------------------------------------|
| **목표**                     | 단일 컨테이너 실행                                  | 여러 컨테이너(서비스) 정의 및 동시에 실행                |
| **사용 명령어**              | `docker run`                                      | `docker-compose up`                                    |
| **설정 파일**                | 설정 파일 없음 (명령어에 모든 설정 포함)            | `docker-compose.yml` 파일에 모든 설정 포함               |
| **컨테이너 수**               | 하나의 컨테이너만 실행                              | 여러 개의 컨테이너(서비스)를 동시에 실행                |
| **서비스 간 연결**            | 수동으로 `docker network`로 연결                    | `docker-compose.yml`에서 서비스 간 네트워크 연결 자동 관리 |
| **환경 설정 관리**            | 환경 변수, 포트, 볼륨 설정은 `docker run` 명령어에 포함 | 환경 변수, 포트, 볼륨 등을 `docker-compose.yml`에 정의 |
| **네트워크 설정**             | 기본 네트워크 사용 (명시적으로 설정하지 않으면 자동) | 네트워크를 명시적으로 설정하여 서비스 간 연결 관리 가능  |
| **서비스 종속성 관리**         | 수동으로 서비스 간 종속성 관리 (예: 컨테이너 시작 순서) | `depends_on`을 사용하여 서비스 시작 순서 및 의존성 관리 |
| **컨테이너 실행 상태 관리**    | 개별 컨테이너 상태 관리 필요 (컨테이너 하나하나 직접 관리) | `docker-compose`로 여러 컨테이너를 한 번에 관리         |
| **재시작 옵션**               | `--restart` 옵션을 사용하여 개별 컨테이너의 재시작 관리 | `restart` 옵션을 `docker-compose.yml`에서 설정          |
| **확장성 및 복잡성**          | 여러 컨테이너를 실행하려면 각각 `docker run` 명령어 실행 | 여러 컨테이너가 필요한 복잡한 애플리케이션을 쉽게 설정 |
| **실행 예시**                 | `docker run -d -p 3000:3000 --name app node:16`       | `docker-compose up` (정의된 모든 서비스 실행)          |

<br />
<br />

2. 정리

```
단일 Docker 컨테이너 실행은 한 번에 하나의 서비스(컨테이너)를 실행하는 방식이다.

Docker Compose는 여러 개의 서비스를 동시에 정의하고 실행하는 데 유용한 도구로,
여러 컨테이너 간의 종속성도 관리할 수 있다.
```
